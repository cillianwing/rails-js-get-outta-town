<div class="wrapper">

	<%= render partial: '/shared/sidebar', locals: { user: @user } %>

	<div class="container-fluid mx-2">

		<%= render partial: '/shared/topnav', locals: { user: @user } %>

		<div id="trip-modal-display" data-taget="#tripModal" name="<%= @user.id %>"></div>
		<div class="js-render-content"></div>
		<div class="row justify-content-center">
			<div class="col-12 py-2 border border-primary" style="border-radius: 20px">
				<ul class="nav nav-pills mb-3 justify-content-center" id="pills-tab" role="tablist">
				  <li class="nav-item">
				    <a class="nav-link active" id="pills-trips-tab" data-toggle="pill" href="#pills-trips" role="tab" aria-controls="pills-trips" aria-selected="true">Trips</a>
				  </li>
				  <li class="nav-item">
				    <a class="nav-link" id="pills-stops-tab" data-toggle="pill" href="#pills-stops" role="tab" aria-controls="pills-stops" aria-selected="false">Stops</a>
				  </li>
				  <li class="nav-item">
				    <a class="nav-link" id="pills-flights-tab" data-toggle="pill" href="#pills-flights" role="tab" aria-controls="pills-flights" aria-selected="false">Flights</a>
				  </li>
				  <li class="nav-item">
				    <a class="nav-link" id="pills-activities-tab" data-toggle="pill" href="#pills-activities" role="tab" aria-controls="pills-activities" aria-selected="true">Activities</a>
				  </li>
				  <li class="nav-item">
				    <a class="nav-link" id="pills-accommodations-tab" data-toggle="pill" href="#pills-accommodations" role="tab" aria-controls="pills-accommodations" aria-selected="true">Accommodations</a>
				  </li>				  
				</ul>
				<div class="tab-content" id="pills-tabContent">
				  <div class="tab-pane fade show active" id="pills-trips" role="tabpanel" aria-labelledby="pills-trips-tab">
				  	<div class="row">
				  		<% if @trips.empty? %>
					  		<div class="col-12">
				  				<h3 class="text-primary text-center">You have not created or joined any trips!</h3>
				  			</div>
			  				<%= link_to '<button class="btn btn-success my-1" type="button">Create New Trip</button>'.html_safe, new_user_trip_path(@user), class: "ml-auto mr-1" %>
			  				<%= link_to '<button class="btn btn-success my-1" type="button">Join a Group Trip</button>'.html_safe, group_trip_path, class: "mr-auto ml-1" %>
			  			<% else %>
				  			<div class="row">
							  	<div class="col-7 border-right border-primary ml-auto">
							  		<h3 class="my-2 text-primary">Next Trip</h3>
							  		<div class="row">
							  			<div class="col-6 mx-auto">
												<div class="card mx-auto my-auto">
													<%= image_tag @trips.first.select_image, class: "card-img-top" %>
												</div>
										   	<div class="card-body">
											   	<strong><p class="card-title text-center"><%= @trips.first.title %></p></strong>
												   	<p class="col card-text text-center"><%= @trips.first.start.strftime("%b %-d, %Y") %> - <%= @trips.first.end.strftime("%b %-d, %Y") %></p>
										   	</div>										
							  			</div>
							  			<div class="col-6 mx-auto my-auto">
							  				<strong><p>Trip Description: </strong><%= @trips.first.description %></p>
							  				<strong>Stops: </strong><%= link_to @trips.first.stops.length, trip_stops_path(@trips.first) %>
						  					<ul>
						  						<% if @trips.first.stops.empty? %>
						  							<li>No stops yet for this trip</li>
					  							<% else %>
							  						<%= @trips.first.stops.each do |stop| %>
							  							<li><%= stop %></li>
							  						<% end %>
						  						<% end %>
						  					</ul>
							  				<strong>Other Travellers:</strong>
												<% if @trips.first.group_trip %>
							  					<ul>
							  						<% if @trips.first.users.length == 1 %>
							  							<li>No other travellers on this trip</li>
						  							<% else %>
								  						<%= @trips.first.users.each do |user| %>
								  							<li><%= user.name unless user.id == @user.id %></li>
								  						<% end %>
							  						<% end %>
							  					</ul>		
						  					<% else %>
						  						<ul>
						  							<li>No other travellers on this trip</li>
						  						</ul>
						  					<% end %>
						  					<p>Flights booked: <%= link_to @trips.first.flights.length, trip_flights_path(@trips.first) %></p>
						  					<p>Activities booked: <%= link_to @trips.first.activities.length, trip_activities_path(@trips.first) %></p>
						  					<p>Accommodations booked: <%= link_to @trips.first.accommodations.length, trip_accommodations_path(@trips.first) %></p>
							  			</div>
							  		</div>
							  	</div>
							  	<div class="col-4 border-left border-primary mr-auto">
							  		<h3 class="text-primary">Upcoming Trips</h3>
							  	</div>
				  			</div>
			  			<% end %>
					  </div>
				  </div>
				  <div class="tab-pane fade" id="pills-stops" role="tabpanel" aria-labelledby="pills-stops-tab">
				  	Bunch of info for stops.
				  </div>
				  <div class="tab-pane fade" id="pills-flights" role="tabpanel" aria-labelledby="pills-flights-tab">
				  	Bunch of info for flights.
				  </div>
				  <div class="tab-pane fade" id="pills-activities" role="tabpanel" aria-labelledby="pills-activities-tab">
				  	Bunch of info for activities.
				  </div>
				  <div class="tab-pane fade" id="pills-accommodations" role="tabpanel" aria-labelledby="pills-accommodations-tab">
				  	Bunch of info for accommodations.
				  </div>
				</div>
			</div>
		</div>

	</div>

</div>